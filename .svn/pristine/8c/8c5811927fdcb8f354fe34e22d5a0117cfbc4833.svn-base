<?php
/**
 * templates.php
 * Created on 17.10.2007
 *
 * @author  Joe Koperski 
 * 
 */


$Error['template_not_found'] = 'Fehler: Template nicht gefunden';


/*******************************************************************************
	Parses a HTML-Template and sets the given content.
	A Variable inside a template is encapsuled in <%% %%>, e.g.: <%%CONTENT%%>
******************************************************************************/
function ParseTemplate( $FilePath, $Values ) { 

	$tpl = GetTemplate( $FilePath );

	if(is_array($Values)) {
		foreach($Values as $key => $value) { 
		$suchmuster = "/<%%(".strtoupper($key).")%%>/si";
			// replace found variables
			$tpl = preg_replace($suchmuster, $value, $tpl); 
		}// foreach
		
		// remove left variables
		$tpl = preg_replace("/((<%%)(.+?)(%%>))/si", '', $tpl);
	}
	return $tpl; 
}// ParseTemplate

 
/*******************************************************************************
 * Reads a HTML-Template.
 ******************************************************************************/
function GetTemplate($tpl) 
{
	global $Error;

	if( file_exists( $tpl )) {
//		$template = str_replace('"','\"', implode('',file($tpl)));
		$template = implode('',file($tpl));
	}// if
	else {
		$template = $Error['template_not_found'];
	}// else
	
	return $template;
}// GetTemplate



?>
